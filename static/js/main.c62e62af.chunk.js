(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),s=a(5),i=a.n(s),l=(a(15),a(2)),c=a(3),r=a(8),d=a(6),h=a(9),m=a(1),u=function(){function e(t){Object(l.a)(this,e),this.canvas=t.canvas,this.context=t.context,this.startRadian=0,this.canBeClick=!0,this.awards=t.awards,this.selectedFood=t.selectedFood,this.food=""}return Object(c.a)(e,[{key:"getLineTextList",value:function(e,t,a){for(var o=t.split(""),n="",s=[],i=0;i<o.length;i++)e.measureText(n).width>=a&&(s.push(n),a-=e.measureText(t[0]).width,n=""),n+=o[i];return s.push(n),s}},{key:"drawPanel",value:function(){var e=this.context,t=this.startRadian;e.save(),e.beginPath(),e.fillStyle="#FD6961",e.arc(150,150,150,t,2*Math.PI+t,!1),e.fill(),e.restore()}},{key:"drawPrizeBlock",value:function(){for(var e=this.context,t=this.awards,a=this.startRadian,o=2*Math.PI/t.length,n=a+o,s=0;s<t.length;s++)e.save(),e.beginPath(),e.fillStyle=s%3===0?"#96fbc4":s%3===1?"#fddb92":"#ace0f9",e.moveTo(150,150),e.arc(150,150,140,a,n,!1),e.fill(),e.restore(),e.save(),e.fillStyle="#000",e.font="14px Arial",e.translate(150+140*Math.cos(a+o/2),150+140*Math.sin(a+o/2)),e.rotate(a+o/2+Math.PI/2),this.getLineTextList(e,t[s].name,70).forEach(function(t,a){e.fillText(t,-e.measureText(t).width/2,25*++a)}),e.restore(),a+=o,n+=o}},{key:"drawButton",value:function(){var e=this.context;e.save(),e.beginPath(),e.fillStyle="#FF0000",e.arc(150,150,30,0,2*Math.PI,!1),e.fill(),e.restore(),e.save(),e.beginPath(),e.fillStyle="#000",e.font="20px Arial",e.translate(150,150),e.fillText("Start",-e.measureText("Start").width/2,8),e.restore()}},{key:"drawArrow",value:function(){var e=this.context;e.save(),e.beginPath(),e.fillStyle="#FF0000",e.moveTo(140,125),e.lineTo(150,100),e.lineTo(160,125),e.closePath(),e.fill(),e.restore()}},{key:"windowToCanvas",value:function(e,t){var a=e.getBoundingClientRect(),o=t.clientX,n=t.clientY;return{x:o-a.left,y:n-a.top}}},{key:"startRotate",value:function(){var e=this,t=this.canvas,a=this.context,o=t.getAttribute("style");this.render(),t.addEventListener("mousedown",function(o){if(e.canBeClick){e.canBeClick=!1;var n=e.windowToCanvas(t,o);if(a.beginPath(),a.arc(150,150,30,0,2*Math.PI,!1),a.isPointInPath(n.x,n.y)){e.startRadian=0;var s=e.distanceToStop();e.rotatePanel(s)}}}),t.addEventListener("mousemove",function(n){var s=e.windowToCanvas(t,n);a.beginPath(),a.arc(150,150,30,0,2*Math.PI,!1),a.isPointInPath(s.x,s.y)?t.setAttribute("style","cursor: pointer;".concat(o)):t.setAttribute("style",o)})}},{key:"rotatePanel",value:function(e){var t=(e-this.startRadian)*(100/(5e3*Math.random()+4e3)*1.5);if(this.startRadian+=t,e-this.startRadian<=.05)return this.canBeClick=!0,void this.selectedFood(this.food);this.render(),window.requestAnimationFrame(this.rotatePanel.bind(this,e))}},{key:"distanceToStop",value:function(){var e,t=this,a=0,o=this.awards.map(function(e,a){var o=2*Math.PI/t.awards.length;return o*a+(o*(a+1)-o*a)/2}),n=Math.floor(Math.random()*this.awards.length);return this.food=this.awards[n].name,e=o[n],(a=(a=3*Math.PI/2-e)>0?a:2*Math.PI+a)+10*Math.PI}},{key:"render",value:function(){this.drawPanel(),this.drawPrizeBlock(),this.drawButton(),this.drawArrow()}}]),e}();var v=function(e){var t=Object(o.useRef)(null),a=function(t){e.selectedFood(t)};return Object(o.useEffect)(function(){!function(e,o){a("");var n=t.current,s=n.getContext("2d");n.width=300,n.height=300,new u({canvas:n,context:s,awards:o,selectedFood:a}).startRotate()}(e.food,e.foodList)},[e.food,e.foodList]),n.a.createElement("canvas",{ref:t,className:"canvas"})},f=a(7);a(17);var g=function(e){var t=Object(o.useState)(""),a=Object(f.a)(t,2),s=a[0],i=a[1];return n.a.createElement("div",{className:"card",style:e.isShow?{}:{display:"none"}},n.a.createElement("div",{className:"cardTitle"},n.a.createElement("div",{className:"tools"},n.a.createElement("div",{className:"circle"},n.a.createElement("span",{className:"red box1"})),n.a.createElement("div",{className:"circle"},n.a.createElement("span",{className:"yellow box1"})),n.a.createElement("div",{className:"circle"},n.a.createElement("span",{className:"green box1"}))),n.a.createElement("span",{className:"titleText"},"meatFood"===e.food?"\u8364\u83dc":"vegetablesFood"===e.food?"\u7d20\u83dc":"\u6c64"),n.a.createElement("span",{className:"right_x",onClick:e.closeList})),n.a.createElement("div",{className:"card__content"},n.a.createElement("div",{className:"content_header"},n.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u6dfb\u52a0\u7684\u83dc\u540d",value:s,onChange:function(e){return i(e.target.value)},type:"text",className:"input"}),n.a.createElement("button",{className:"addBtn",onClick:function(){e.addFood(s),i("")}},"\u6dfb\u52a0\u83dc\u54c1")),n.a.createElement("div",{className:"content_box"},e.foodList.map(function(t,a){return n.a.createElement("div",{className:"contentRow",key:t.level},n.a.createElement("span",null,t.level,"\u3001"),n.a.createElement("span",null,t.name),n.a.createElement("span",{className:"right_x",onClick:function(){return e.deeteFood(a)}}))}))))},F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).canvas=n.a.createRef(),a.state={food:"meatFood",isShow:!1,selecteFood:"",foodList:[]},a.meatFood=[{level:"1",name:"\u56de\u9505\u8089"},{level:"2",name:"\u7ea2\u70e7\u8089"},{level:"3",name:"\u82e6\u74dc\u7092\u8089"}],a.vegetablesFood=[{level:"1",name:"\u51c9\u62cc\u9ec4\u74dc"},{level:"2",name:"\u6728\u8033\u83dc"},{level:"3",name:"\u897f\u7ea2\u67ff\u7092\u9e21\u86cb"}],a.soupFood=[{level:"1",name:"\u7d2b\u83dc\u86cb\u82b1\u6c64"},{level:"2",name:"\u897f\u7ea2\u67ff\u9e21\u86cb\u6c64"},{level:"3",name:"\u9ec4\u74dc\u76ae\u86cb\u6c64"}],a.closeList=a.closeList.bind(Object(m.a)(Object(m.a)(a))),a.selectedFood=a.selectedFood.bind(Object(m.a)(Object(m.a)(a))),a.changFood=a.changFood.bind(Object(m.a)(Object(m.a)(a))),a.addFood=a.addFood.bind(Object(m.a)(Object(m.a)(a))),a.deeteFood=a.deeteFood.bind(Object(m.a)(Object(m.a)(a))),a.getList=a.getList.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"changFood",value:function(e){this.setState({food:e,foodList:this[e]})}},{key:"selectedFood",value:function(e){this.setState({selecteFood:e})}},{key:"addFood",value:function(e){if(e){var t=this.state,a=t.foodList,o=t.food,n=a.length;a.push({level:1+parseInt(a[n-1].level),name:e}),this[o]=a,localStorage.setItem(o,JSON.stringify(a))}}},{key:"deeteFood",value:function(e){var t=this.state,a=t.foodList,o=t.food;a.splice(e,1),this.setState({foodList:a}),this[o]=a,localStorage.setItem(o,JSON.stringify(a))}},{key:"getList",value:function(){var e=localStorage.getItem("meatFood"),t=localStorage.getItem("vegetablesFood"),a=localStorage.getItem("soupFood");e?this.meatFood=JSON.parse(localStorage.getItem("meatFood")):localStorage.setItem("meatFood",JSON.stringify(this.meatFood)),t?this.vegetablesFood=JSON.parse(localStorage.getItem("vegetablesFood")):localStorage.setItem("vegetablesFood",JSON.stringify(this.vegetablesFood)),a?this.soupFood=JSON.parse(localStorage.getItem("soupFood")):localStorage.setItem("soupFood",JSON.stringify(this.soupFood)),this.setState({foodList:this.meatFood})}},{key:"closeList",value:function(){this.setState({isShow:!this.state.isShow})}},{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"meatFood"===this.state.food?"\u8364\u83dc":"vegetablesFood"===this.state.food?"\u7d20\u83dc":"\u6c64"),n.a.createElement("span",{className:"addIcon",onClick:this.closeList},this.state.isShow?n.a.createElement("span",null,"\u53d6\u6d88"):n.a.createElement(n.a.Fragment,null,n.a.createElement("svg",{t:"1660620041792",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4016",width:"32",height:"32"},n.a.createElement("path",{d:"M511.984 64C264.976 64 64 264.96 64 512.016 64 759.024 264.976 960 511.984 960 759.056 960 960 759.024 960 512.016 960 264.944 759.024 64 511.984 64z",fill:"#FFBD27","p-id":"4017"}),n.a.createElement("path",{d:"M695.76 552.16h-143.616v143.536A40.224 40.224 0 0 1 512 735.936a40.256 40.256 0 0 1-40.128-40.24v-143.52h-143.632a40.208 40.208 0 1 1 0-80.4h143.632v-143.584a40.16 40.16 0 1 1 80.288 0v143.568h143.616a40.208 40.208 0 1 1 0 80.416z",fill:"#333333","p-id":"4018"})),"\u6dfb\u52a0"))),n.a.createElement("div",{className:"btnGroup"},n.a.createElement("button",{className:"btn",onClick:function(){return e.changFood("meatFood")}},"\u8364\u83dc"),n.a.createElement("button",{className:"btn",onClick:function(){return e.changFood("vegetablesFood")}},"\u7d20\u83dc"),n.a.createElement("button",{className:"btn",onClick:function(){return e.changFood("soupFood")}},"\u6c64")),n.a.createElement("div",{className:"selected"},n.a.createElement("span",null,"\u9009\u4e2d\u7684\u98df\u7269\uff1a",this.state.selecteFood)),n.a.createElement("div",{className:"box"},n.a.createElement(v,{food:this.state.food,foodList:this.state.foodList,selectedFood:this.selectedFood})),n.a.createElement(g,{isShow:this.state.isShow,food:this.state.food,foodList:this.state.foodList,addFood:this.addFood,deeteFood:this.deeteFood,closeList:this.closeList}))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.c62e62af.chunk.js.map