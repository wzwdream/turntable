(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(4),s=a.n(i),r=(a(13),a(1)),l=a(2),c=a(6),h=a(5),d=a(7),u=function(){function t(e){Object(r.a)(this,t),this.canvas=e.canvas,this.context=e.context,this.startRadian=0,this.canBeClick=!0,this.awards=e.awards,this.that=e.that,this.food=""}return Object(l.a)(t,[{key:"getLineTextList",value:function(t,e,a){for(var n=e.split(""),o="",i=[],s=0;s<n.length;s++)t.measureText(o).width>=a&&(i.push(o),a-=t.measureText(e[0]).width,o=""),o+=n[s];return i.push(o),i}},{key:"drawPanel",value:function(){var t=this.context,e=this.startRadian;t.save(),t.beginPath(),t.fillStyle="#FD6961",t.arc(150,150,150,e,2*Math.PI+e,!1),t.fill(),t.restore()}},{key:"drawPrizeBlock",value:function(){for(var t=this.context,e=this.awards,a=this.startRadian,n=2*Math.PI/e.length,o=a+n,i=0;i<e.length;i++)t.save(),t.beginPath(),t.fillStyle=i%3===0?"#96fbc4":i%3===1?"#fddb92":"#ace0f9",t.moveTo(150,150),t.arc(150,150,140,a,o,!1),t.fill(),t.restore(),t.save(),t.fillStyle="#000",t.font="14px Arial",t.translate(150+140*Math.cos(a+n/2),150+140*Math.sin(a+n/2)),t.rotate(a+n/2+Math.PI/2),this.getLineTextList(t,e[i].name,70).forEach(function(e,a){t.fillText(e,-t.measureText(e).width/2,25*++a)}),t.restore(),a+=n,o+=n}},{key:"drawButton",value:function(){var t=this.context;t.save(),t.beginPath(),t.fillStyle="#FF0000",t.arc(150,150,30,0,2*Math.PI,!1),t.fill(),t.restore(),t.save(),t.beginPath(),t.fillStyle="#000",t.font="20px Arial",t.translate(150,150),t.fillText("Start",-t.measureText("Start").width/2,8),t.restore()}},{key:"drawArrow",value:function(){var t=this.context;t.save(),t.beginPath(),t.fillStyle="#FF0000",t.moveTo(140,125),t.lineTo(150,100),t.lineTo(160,125),t.closePath(),t.fill(),t.restore()}},{key:"windowToCanvas",value:function(t,e){var a=t.getBoundingClientRect(),n=e.clientX,o=e.clientY;return{x:n-a.left,y:o-a.top}}},{key:"startRotate",value:function(){var t=this,e=this.canvas,a=this.context,n=e.getAttribute("style");this.render(),e.addEventListener("mousedown",function(n){if(t.canBeClick){t.canBeClick=!1;var o=t.windowToCanvas(e,n);if(a.beginPath(),a.arc(150,150,30,0,2*Math.PI,!1),a.isPointInPath(o.x,o.y)){t.startRadian=0;var i=t.distanceToStop();t.rotatePanel(i)}}}),e.addEventListener("mousemove",function(o){var i=t.windowToCanvas(e,o);a.beginPath(),a.arc(150,150,30,0,2*Math.PI,!1),a.isPointInPath(i.x,i.y)?e.setAttribute("style","cursor: pointer;".concat(n)):e.setAttribute("style",n)})}},{key:"rotatePanel",value:function(t){var e=(t-this.startRadian)*(100/(5e3*Math.random()+4e3)*1.5);if(this.startRadian+=e,t-this.startRadian<=.05)return this.canBeClick=!0,void this.that.selectedFood(this.food);this.render(),window.requestAnimationFrame(this.rotatePanel.bind(this,t))}},{key:"distanceToStop",value:function(){var t,e=this,a=0,n=this.awards.map(function(t,a){var n=2*Math.PI/e.awards.length;return n*a+(n*(a+1)-n*a)/2}),o=Math.floor(Math.random()*this.awards.length);return this.food=this.awards[o].name,t=n[o],(a=(a=3*Math.PI/2-t)>0?a:2*Math.PI+a)+10*Math.PI}},{key:"render",value:function(){this.drawPanel(),this.drawPrizeBlock(),this.drawButton(),this.drawArrow()}}]),t}(),v=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(h.a)(e).call(this,t))).canvas=o.a.createRef(),a.state={title:"\u8364\u83dc",food:""},a.meatFood=[{level:"1",name:"\u56de\u9505\u8089"},{level:"2",name:"\u7ea2\u70e7\u8089"},{level:"3",name:"\u82e6\u74dc\u7092\u8089"}],a.vegetablesFood=[{level:"1",name:"\u51c9\u62cc\u9ec4\u74dc"},{level:"2",name:"\u6728\u8033\u83dc"},{level:"3",name:"\u897f\u7ea2\u67ff\u7092\u9e21\u86cb"}],a.soupFood=[{level:"1",name:"\u7d2b\u83dc\u86cb\u82b1\u6c64"},{level:"2",name:"\u897f\u7ea2\u67ff\u9e21\u86cb\u6c64"},{level:"3",name:"\u9ec4\u74dc\u76ae\u86cb\u6c64"}],a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"changFood",value:function(t){this.setState({food:""});var e=this.canvas.current,a=e.getContext("2d");e.width=300,e.height=300,new u({canvas:e,context:a,awards:this[t],that:this}).startRotate();var n="meatFood"===t?"\u8364\u83dc":"vegetablesFood"===t?"\u7d20\u83dc":"\u6c64";this.setState({title:n})}},{key:"selectedFood",value:function(t){this.setState({food:t})}},{key:"getList",value:function(){localStorage.setItem("meatFood",JSON.stringify(this.meatFood));var t=localStorage.getItem("meatFood"),e=localStorage.getItem("vegetablesFood"),a=localStorage.getItem("soupFood");t&&(this.meatFood=JSON.parse(localStorage.getItem("meatFood"))),e&&(this.meatFood=JSON.parse(localStorage.getItem("vegetablesFood"))),a&&(this.meatFood=JSON.parse(localStorage.getItem("soupFood")))}},{key:"componentDidMount",value:function(){this.getList(),this.changFood("meatFood")}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"title"},o.a.createElement("span",null,this.state.title)),o.a.createElement("div",{className:"btnGroup"},o.a.createElement("button",{className:"btn",onClick:function(){return t.changFood("meatFood")}},"\u8364\u83dc"),o.a.createElement("button",{className:"btn",onClick:function(){return t.changFood("vegetablesFood")}},"\u7d20\u83dc"),o.a.createElement("button",{className:"btn",onClick:function(){return t.changFood("soupFood")}},"\u6c64")),o.a.createElement("div",{className:"selected"},o.a.createElement("span",null,"\u9009\u4e2d\u7684\u98df\u7269\uff1a",this.state.food)),o.a.createElement("div",{className:"box"},o.a.createElement("canvas",{ref:this.canvas,className:"canvas"})))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},8:function(t,e,a){t.exports=a(15)}},[[8,2,1]]]);
//# sourceMappingURL=main.eab8ae3f.chunk.js.map